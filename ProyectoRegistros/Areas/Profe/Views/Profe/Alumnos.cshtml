@using ProyectoRegistros.Models

@model IEnumerable<dynamic>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "LayoutProfe";
}


<!--MODAL PARA EDITAR-->

<div class="modal" id="modal-EditAlumno">
    <form asp-action="EditarAlumno" asp-controller="Profe" method="post">
        <button class="cerrar" type="button">X</button><br>
        <div id="acomodar">
            <i class="material-symbols-outlined">person</i>
            <h2>Editar alumno</h2>
        </div><br>
        <!--tomar id-->
        <input type="hidden" name="Id" id="editID" />

        <label>Nombre:</label><br>
        <input name="Nombre" id="editNombre" class="inputForms" type="text" placeholder="Mariana...."><br>
        <label>Tutor:</label><br>
        <input name="Tutor" id="editTutor" class="inputForms" type="text" placeholder="Escribir..."><br>
        <label>Teléfono:</label><br>
        <input name="NumContacto" id="editTel" class="inputForms" type="text" placeholder="Escribir..."><br>
        <label>Teléfono 2:</label><br>
        <input name="NumSecundario" id="editTel2" class="inputForms" type="text" placeholder="Escribir..."><br>

        <label>Padecimientos:</label><br>
        <input name="Padecimientos" id="editPadecim" class="inputForms" type="text" placeholder="Escribir..."><br>


        @*  <div class="error" style=" margin-top: 5px; margin-bottom:5px; ">
            <p>El nombre ya existe!</p>
            <p>El nombre del taller ya existe!</p>
        </div> 
         *@

        <div style="display: flex; justify-content: center;">
            <button style="margin: -0vh 0; position:static;" type="submit" class="buttons">Guardar</button>
        </div>
    </form>
</div>

<!--MODAL PARA ELIMINAR-->
<div class="modal" id="modal-DeleteAlumno">
    <form method="post" asp-action="eliminarTallerDelAlumno" asp-controller="Profe" style="margin-top:140px;">
        <button class="cerrar" type="button">X</button><br>

        <input type="hidden" name="Id" id="deleteID" />
        <fieldset style="border:none;">
            <legend>
                <h2>¿Desea eliminar al alumno en alguno de estos talleres?</h2>
                <div class="scroll-eliminar">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 5% !important;">Taller</th>
                                <th>Eliminar</th>
                            </tr>
                        </thead>
                        <tbody id="talleresAlumno">
                            <!--No se pueden cargar los talleres desde aca, pq se cargan los de tooooodos, no los de 1-->
                            <!--se cargan con un json-->
                        </tbody>
                    </table>
                </div>
            </legend>
        </fieldset>
        <div style="margin: 0vh 0 0 1vw; justify-content: flex-end; display: flex;">
            <button id="eliminarAlumno" type="submit" class="buttons">Confirmar</button>
        </div>
    </form>
</div>


<div class="filtros">
    <div class="buscador">
        <input type="search" id="fil" placeholder="Nombre..." />

    </div>


</div>


<div class="tablita">
    <div class="tabla-scroll">

        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Tutor</th>
                    <th>Teléfono</th>
                    <th>Teléfono 2</th>
                    <th>Padecimientos</th>
                    <th>Talleres</th>
                    <th>Opciones</th>
                </tr>

            </thead>

            <tbody>
                @foreach (var a in Model)
                {
                    <tr>
                        <td>@a.Alumno.Nombre</td>
                        <td>@a.Alumno.Tutor</td>
                        <td>@a.Alumno.NumContacto</td>
                        <td>@a.Alumno.NumSecundario</td>

                        <td>@a.Alumno.Padecimientos</td>
                        <td>
                            @foreach (var t in a.Talleres)
                            {
                                <p>@t.Nombre</p>
                            }
                        </td>

                        <td>
                            <div class="botones">
                                <img src="~/img/edit.png" class="btneditar" data-id="@a.Alumno.Id"
                                     data-nombre="@a.Alumno.Nombre"
                                     data-tutor="@a.Alumno.Tutor"
                                     data-numcontacto="@a.Alumno.NumContacto"
                                     data-numsecundario="@a.Alumno.NumSecundario"
                                     data-padecimientos="@a.Alumno.Padecimientos" />

                                <img class="btneliminar" src="~/img/X.png" data-id="@a.Alumno.Id"
                                     data-nombre="@a.Alumno.Nombre" />
                            </div>
                        </td>

                    </tr>
                }
            </tbody>
        </table>

    </div>

</div>
