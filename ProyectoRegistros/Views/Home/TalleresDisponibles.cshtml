<html>
<head>
    <meta charset="utf-8" />
    <title>Talleres</title>
    <link rel="stylesheet" href="~/css/NoInician.css" />

</head>
<body>
    @model IEnumerable<ProyectoRegistros.Models.ViewModels.TalleresViewModels>

    <header class="principal">
        <div class="izq">
            <img id="ig1" src="../img/arrow_back.png" />
            <h2>Talleres disponibles</h2>
        </div>
        <img id="ig2" src="../img/logo.png" />
    </header>

    <div class="filtros">
        <div class="buscador">
            <input type="number" id="search-edad" min="3" max="100" placeholder="Edad del alumno" />
        </div>
    </div>

    <div id="tabla-container">
        @await Html.PartialAsync("_TalleresTabla", Model)
    </div>

    <script src="~/js/NoInician.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {

            const searchInput = document.getElementById('search-edad');
            const tablaContainer = document.getElementById('tabla-container');
            let debounceTimer;

            searchInput.addEventListener('input', function() {
                clearTimeout(debounceTimer);

                debounceTimer = setTimeout(() => {
                    const edad = searchInput.value;
                    const url = `@Url.Action("TalleresDisponibles", "Home")?edad=${encodeURIComponent(edad)}`;

                    fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest'
                        }
                    })
                    .then(response => response.text())
                    .then(html => {
                        tablaContainer.innerHTML = html;
                    })
                    .catch(error => console.error('Error al actualizar la tabla:', error));

                }, 300);
            });
        });
    </script>
</body>
</html>